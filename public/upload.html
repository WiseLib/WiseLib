<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.27/angular.min.js"></script>
        <script src="js/fetcher.js"></script>
        <script src="../discipline.js"></script>
        <script src="js/publication-controller.js"></script>
        <title>title</title>
    </head>
    <body>
        <div ng-app="wiselib" ng-controller="PublicationController as publication">
            <form id="upload-publication">
                <label for="title">Title :</label>
                <input id="title" type="text" placeholder="Title" ng-model="publication.title">
                <label for="year">Year :</label>
                <input id="year" type="number" ng-model="publication.year">
                <label for="nb-pages">Number of Pages :</label>
                <input id="nb-pages" type="number" ng-model="publication.numberOfPages">
                <label for="url">URL :</label>
                <input id="url" type="url" ng-model="publication.url">
                <label for="co-authors">Co Authors :</label>
                <label for="firstname">firstname :</label>
                <input id="firstname" type="text" ng-model="possibleAuthor.firstName">
                <label for="lastname">lastname :</label>
                <input id="lastname" type="text" ng-model="possibleAuthor.lastName">
                <ul>
                    <li ng-repeat="person in publication.fetcher.fetchPersons(possibleAuthor)">
                        <personmin person="person" ng-click="publication.add(publication.authors, person)"></personmin>
                    </li>
                </ul>
                <div ng-repeat="chosenAuthor in publication.authors">
                    <personmin person="chosenAuthor"></personmin>
                    <button ng-click="publication.remove(publication.authors, chosenAuthor)">Remove</button>
                </div>
                <select ng-model="selectedDiscipline" 
                        ng-options="discipline.id for discipline in publication.fetcher.fetchDisciplines({})">
                </select>
                <button ng-click="publication.add(publication.disciplines, selectedDiscipline)">
                    Add
                </button>
                <ul>
                    <li ng-repeat="discipline in publication.disciplines">
                        {{discipline.id}}
                    </li>
                </ul>
                <label for="proceeding-choice">Proceeding</label>
                <input id="proceeding-choice" type="radio" ng-model="publication.type" value="Proceeding">
                <label for="journal">Journal</label>
                <input id="journal" type="radio" ng-model="publication.type" value="Journal">
                <div ng-show="publication.type == 'Proceeding'">
                    <label for="proceeding">Select a Proceeding :</label>
                    <input id="proceeding" type="text" ng-model="proceeding.name">
                    <ul>
                        <li ng-repeat="possibleProceeding in publication.fetcher.fetchProceedings(proceeding)">
                            <proceedingmin proceeding="possibleProceeding" 
                                           ng-click="publication.proceeding = possibleProceeding">
                            </proceedingmin>
                        </li>
                    </ul>
                    <proceedingmin proceeding="publication.proceeding"></proceedingmin>
                    <label for="editors">Editors :</label>
                    <input id="editors" type="text" ng-model="publication.editors">
                    <label for="publisher">Publisher :</label>
                    <input id="publisher" type="text" ng-model="publication.publisher">
                    <label for="city">City :</label>
                    <input id="city" type="text" ng-model="publication.city">
                </div>
                <div ng-show="publication.type == 'Journal'">
                    <label for="volume">Volume :</label>
                    <input id="volume" type="number" ng-model="publication.volume">
                    <label for="number">Number :</label>
                    <input id="number" type="number" ng-model="publication.number">
                </div>
            </form>
            <button ng-click="publication.post()">POST</button>
        </div>
    </body>
</html>